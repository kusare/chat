import type { NextPage } from "next";
import Head from "next/head";
import React, { useState, useEffect, useRef } from "react";
import { Global, css } from "@emotion/react";
import { atom, useRecoilValue, useSetRecoilState } from "recoil";
import { cssBackgroundState } from "../recoil/States";
import {
  SwipeableTemporaryDrawer,
  CustomDrawer,
} from "../components/GlobalParts";
import { useGetWindowSize } from "../utils/get-window-size";

export const UseIndexContent: React.FC = () => {
  const { height, width } = useGetWindowSize();
  return (
    <>
      <h1>Index</h1>
      <div>
        height:{height} width:{width}
      </div>
      <div>{`phone width <= 599px`}</div>
      <div>{`tablet 600px < width < 959px`}</div>
      <div>{`desktop width >= 960px`}</div>
    </>
  );
};

const Home: NextPage = () => {
  const { height, width } = useGetWindowSize();
  const cssText = useRecoilValue(cssBackgroundState);
  return (
    <div>
      <Global
        styles={css`
          body {
            ${cssText}
          }
        `}
      />
      <Head>
        <title>Hamu House</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      {width <= 599 && (
        <SwipeableTemporaryDrawer>
          <UseIndexContent></UseIndexContent>
        </SwipeableTemporaryDrawer>
      )}

      {599 < width && (
        <CustomDrawer>
          <UseIndexContent></UseIndexContent>
        </CustomDrawer>
      )}
    </div>
  );
};

export default Home;
